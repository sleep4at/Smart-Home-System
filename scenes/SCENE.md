# 📝 场景自动化规则使用指南

本系统支持通过 **IF-THEN** 逻辑实现设备联动。您可以根据预设模板，仅需调整数值即可快速创建智能场景。

## 💡 核心场景示例

### 1. 阈值触发（温度过高自动制冷）

> **场景描述**：当环境温度达到炎热水平时，系统自动开启降温设备。

* **触发类型**：`高于阈值`
* **触发设备**：选择 `温湿度传感器`
* **触发字段**：`temp` (温度)
* **阈值**：`28`
* **执行设备**：选择 `空调`
* **动作类型**：`设置温度`
* **目标状态**：`26°C`

### 2. 区间保持（恒温环境监控）

> **场景描述**：确保敏感环境（如药柜、机房）的温度处于安全区间。

* **触发类型**：`超出范围`
* **触发设备**：选择 `温湿度传感器`
* **触发字段**：`temp`
* **参数设置**：最小值 `20` / 最大值 `25`
* **执行动作**：发送告警通知 或 开启指定补偿设备

### 3. 时间 + 状态组合（夜间节能模式）

> **场景描述**：在特定时段内，根据设备当前运行状态执行优化指令。

* **触发类型**：`时间 + 状态组合`
* **时间窗口**：`23:00` - `23:59`
* **检测条件**：`空调` 状态为 `开启`
* **执行设备**：同一 `空调`
* **动作类型**：`调高温度` (例如从 24°C 升至 26°C)

---

## ⚙️ 参数配置表（后端对应）

| 配置项 | 说明 | 建议值 |
| --- | --- | --- |
| **触发字段** | 传感器上报数据中的 JSON 键名 | `temp`, `humi`, `lux` |
| **防抖时间** | 触发一次后，进入冷却的时间（避免频繁开关） | `≥ 60s` |
| **日志来源** | 在调试工具中查看规则运行记录 | `SCENE_RULE` |

---

## ⚠️ 注意事项

* **权限限制**：场景规则仅对您**有权访问**的设备生效（包含“公共区域设备”及“个人私有设备”）。
* **实时性**：规则触发后，系统会同步更新数据库状态并立即发布 **MQTT 下行指令**。
* **数据闭环**：所有自动化执行记录均可在“控制台输出”或“系统日志”中追溯。

---
